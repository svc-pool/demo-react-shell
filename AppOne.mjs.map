{"version":3,"file":"AppOne.mjs","sources":["../.yarn/cache/@svc-pool-core-npm-2.0.5-423057e130-739ad67e2d.zip/node_modules/@svc-pool/core/dist/esm/index.js","../plugins/AppOne.tsx"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nclass BaseException extends Error {\n}\nclass CircularDependency extends BaseException {\n    constructor(name) {\n        super(`cannot resolve circular dependencies: ${name}`);\n    }\n}\nclass NotRegistered extends BaseException {\n    constructor(name) {\n        super(`Point requested was not registered yet: ${name}`);\n    }\n}\n\nfunction createTable(defs) {\n    const r = {};\n    function appendOrCreate(t, def) {\n        const next = Object.assign({}, t);\n        const exist = next[def.point];\n        if (exist) {\n            next[def.point] = [...exist, Object.assign({}, def)];\n        }\n        else {\n            next[def.point] = [Object.assign({}, def)];\n        }\n        return next;\n    }\n    return defs.reduce((acc, cur) => appendOrCreate(acc, cur), r);\n}\nfunction createSvcPool(resolved) {\n    const r = Object.assign({}, resolved);\n    const getServices = (name) => {\n        const svcs = r[name];\n        if (svcs) {\n            return [...svcs];\n        }\n        return [];\n    };\n    return { getServices };\n}\nfunction resolveDefs(...defs) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const table = createTable(defs);\n        const points = Object.keys(table);\n        const resolved = {};\n        const resolving = new Set();\n        function resolveDep(dep, isRequired) {\n            return __awaiter(this, void 0, void 0, function* () {\n                const def = table[dep];\n                if (!def) {\n                    if (isRequired) {\n                        throw new NotRegistered(dep);\n                    }\n                    return undefined;\n                }\n                return yield resolvePoint(dep); // eslint-disable-line no-use-before-define\n            });\n        }\n        function resolveSvc(def) {\n            var _a;\n            return __awaiter(this, void 0, void 0, function* () {\n                const deps = {};\n                const keys = Object.keys((_a = def.deps) !== null && _a !== void 0 ? _a : {});\n                for (const k of keys) {\n                    deps[k] = yield resolveDep(k, def.deps[k]);\n                }\n                return yield def.factory(deps);\n            });\n        }\n        function resolveSvcs(svcDefs) {\n            return Promise.all(svcDefs.map(resolveSvc));\n        }\n        function resolvePoint(point, isRoot = false) {\n            return __awaiter(this, void 0, void 0, function* () {\n                // if there is already a service for this point maybe this is a many point\n                if (resolved[point] && !isRoot) {\n                    return resolved[point];\n                }\n                // if currently resolving the same type, we have a circular dependency\n                if (resolving.has(point)) {\n                    throw new CircularDependency(point);\n                }\n                resolving.add(point);\n                const svcDefs = table[point];\n                const instances = yield resolveSvcs(svcDefs);\n                resolving.delete(point);\n                return instances;\n            });\n        }\n        for (const point of points) {\n            resolved[point] = yield resolvePoint(point, true);\n        }\n        return createSvcPool(resolved);\n    });\n}\n\nfunction createSvcDef(point, defOrFactory) {\n    if (typeof defOrFactory === 'function') {\n        return {\n            point,\n            desc: undefined,\n            deps: {},\n            factory: defOrFactory,\n        };\n    }\n    const { deps, desc } = defOrFactory, other = __rest(defOrFactory\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    , [\"deps\", \"desc\"]);\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    let theDeps = {};\n    if (Array.isArray(deps)) {\n        theDeps = deps.reduce((prev, cur) => {\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            return Object.assign(Object.assign({}, prev), { [cur]: true });\n        }, theDeps);\n    }\n    else {\n        theDeps = Object.assign({}, deps);\n    }\n    return Object.assign(Object.assign({}, other), { point,\n        desc, deps: theDeps });\n}\n\nexport { CircularDependency, NotRegistered, createSvcDef, resolveDefs };\n","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { createSvcDef } from \"@svc-pool/core\";\nimport Registry from \"../root/Registry\";\n\nconst svcDef = createSvcDef<Registry>(\"app\", function () {\n  return function AppOne() {\n    return (\n      <a\n        target=\"_blank\"\n        href=\"https://github.com/svc-pool/react-plugin-template\"\n      >\n        Add your plugin to this demo\n      </a>\n    );\n  };\n});\n\nexport default svcDef;\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE;AACtB,IAAI,IAAI,CAAC,GAAG,EAAE,CAAC;AACf,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;AACvF,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACpB,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,OAAO,MAAM,CAAC,qBAAqB,KAAK,UAAU;AACvE,QAAQ,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAChF,YAAY,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,SAAS,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1F,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAClC,SAAS;AACT,IAAI,OAAO,CAAC,CAAC;AACb,CAAC;AA0GD;AACA,SAAS,YAAY,CAAC,KAAK,EAAE,YAAY,EAAE;AAC3C,IAAI,IAAI,OAAO,YAAY,KAAK,UAAU,EAAE;AAC5C,QAAQ,OAAO;AACf,YAAY,KAAK;AACjB,YAAY,IAAI,EAAE,SAAS;AAC3B,YAAY,IAAI,EAAE,EAAE;AACpB,YAAY,OAAO,EAAE,YAAY;AACjC,SAAS,CAAC;AACV,KAAK;AACL,IAAI,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,YAAY,EAAE,KAAK,GAAG,MAAM,CAAC,YAAY;AACpE;AACA;AACA,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC,CAAC;AACxB;AACA;AACA,IAAI,IAAI,OAAO,GAAG,EAAE,CAAC;AACrB,IAAI,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;AAC7B,QAAQ,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,GAAG,KAAK;AAC7C;AACA;AACA,YAAY,OAAO,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,GAAG,GAAG,IAAI,EAAE,CAAC,CAAC;AAC3E,SAAS,EAAE,OAAO,CAAC,CAAC;AACpB,KAAK;AACL,SAAS;AACT,QAAQ,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;AAC1C,KAAK;AACL,IAAI,OAAO,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,EAAE,KAAK;AAC1D,QAAQ,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;AAC/B;;;;;;AChJA;;;;"}